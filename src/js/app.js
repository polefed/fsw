// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// webp
export function isWebp() {

  function testWebP(callback) {

    let webP = new Image();
    webP.onload = webP.onerror = function () {
      callback(webP.height == 2);
    };
    webP.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
  }

  testWebP(function (support) {
  let className = support === true ? 'webp' : 'no-webp';
  document.documentElement.classList.add(className);
  });
}
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// scroll up
const scrollUpOffset = 100;
const scrollUp = document.querySelector('.scroll-up');
const scrollUpSvgPath = document.querySelector('.scroll-up__svg-path');
const scrollUpPathLength = scrollUpSvgPath.getTotalLength();

scrollUpSvgPath.style.strokeDasharray = `${scrollUpPathLength} ${scrollUpPathLength}`;
scrollUpSvgPath.style.transition = 'stroke-dashoffset 20ms';

const getTop = () => window.pageYOffset || document.documentElement.scrollTop;

const updateDashoffset = () => {
    const scrollUpHeight = document.documentElement.scrollHeight - window.innerHeight;
    const scrollUpDashoffset = scrollUpPathLength - (getTop() * scrollUpPathLength / scrollUpHeight);

    scrollUpSvgPath.style.strokeDashoffset = scrollUpDashoffset;
};

window.addEventListener('scroll', () => {
    updateDashoffset();
    if (getTop() > scrollUpOffset) {
        scrollUp.classList.add('__active');
    } else {
        scrollUp.classList.remove('__active');
    }
});

scrollUp.addEventListener('click', () => {
    window.scrollTo({
        top: 0,
        behavior: 'smooth',
    });
});
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// change class on scroll
window.addEventListener('scroll', function(){
  const myHeader = document.querySelector('.header');
  myHeader.classList.toggle('__scrolled', window.scrollY > 0)
})
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// animate on scroll
const showItem = document.querySelectorAll('.show-item');
const showOptions = {
  root: null,
  rootMargin: '20px',
  threshold: .1
}
const showCallback = (entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('__show')
    }
  })  
}
let showObserver = new IntersectionObserver(showCallback, showOptions);
showItem.forEach(el => {
  showObserver.observe(el);
});


// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// theme switch
// $(".theme-switch-button").click(function (event) {
//     $(":root").toggleClass("dark-theme");
//     $(".theme-switch-button").toggleClass("theme_switch__active");
// });

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// back to top
// var bttButton = $('.back-to-top-button');
// $(window).scroll(function () {
//     if ($(window).scrollTop() > 500) {
//         bttButton.addClass('__show');
//     } else {
//         bttButton.removeClass('__show');
//     }
// });
// bttButton.on('click', function (e) {
//     e.preventDefault();
//     $('html, body').animate({
//         scrollTop: 0
//     }, '300');
// });

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// progress bar
// var progressBar = document.querySelector('.progress-bar');
// window.onscroll = function (e) {
//     var progressBarHeight = document.body.offsetHeight - window.innerHeight;
//     var progressBarWidth = (window.pageYOffset * 105 / progressBarHeight)
//     progressBar.style.width = progressBarWidth + '%'
// }


// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// burger menu
// $(".burger-button, .burger-overlay").click(function (event) {
//     $(".burger-button, .navigation-menu").toggleClass("__active");
//     $(".burger-overlay").toggleClass("__active");
//     $("body").toggleClass("__lock");
// });

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// filter
// $(function () {

//     let filterData = $("[data-filter]");

//     filterData.on("click", function (event) {
//         event.preventDefault();

//         let categoryFD = $(this).data('filter');

//         // css filter-hide { display: none; }
//         if (categoryFD == 'all') {
//             $("[data-category]").removeClass("filter-hide");
//         } else {
//             $("[data-category]").each(function () {
//                 let workCategoryFD = $(this).data('category');

//                 if (workCategoryFD != categoryFD) {
//                     $(this).addClass('filter-hide');
//                 } else {
//                     $(this).removeClass('filter-hide');
//                 }
//             });
//         }
//     });

//     filterData.on('click', function (e) {
//         e.preventDefault();
//         var $this = $(this);

//         filterData.removeClass('__active');
//         $this.addClass('__active');
//     });

// });











// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================


// const thisHeader = document.querySelector('.header');

// const callback = function (entries, observer) {
//     if (entries[0].isIntersecting) {
//         thisHeader.classList.remove('__this-scrolled');
//     } else {
//         thisHeader.classList.add('__this-scrolled');
//     }
// };

// const thisHeaderObserver = new IntersectionObserver(callback);
// thisHeaderObserver.observe(thisHeader);













// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// dynamic adapt
// class DynamicAdapt {
//     // массив объектов
//     elementsArray = [];
//     daClassname = '_dynamic_adapt_';

//     constructor(type) {
//         this.type = type;
//     }

//     init() {
//         // массив DOM-элементов
//         this.elements = [...document.querySelectorAll('[data-da]')];

//         // наполнение elementsArray объктами
//         this.elements.forEach((element) => {
//             const data = element.dataset.da.trim();
//             if (data !== '') {
//                 const dataArray = data.split(',');

//                 const oElement = {};
//                 oElement.element = element;
//                 oElement.parent = element.parentNode;
//                 oElement.destination = document.querySelector(`.${dataArray[0].trim()}`);
//                 oElement.breakpoint = dataArray[1] ? dataArray[1].trim() : '767';
//                 oElement.place = dataArray[2] ? dataArray[2].trim() : 'last';

//                 oElement.index = this.indexInParent(
//                     oElement.parent, oElement.element,
//                 );

//                 this.elementsArray.push(oElement);
//             }
//         });

//         this.arraySort(this.elementsArray);

//         // массив уникальных медиа-запросов
//         this.mediaArray = this.elementsArray
//             .map(({
//                 breakpoint
//             }) => `(${this.type}-width: ${breakpoint}px),${breakpoint}`)
//             .filter((item, index, self) => self.indexOf(item) === index);

//         // навешивание слушателя на медиа-запрос
//         // и вызов обработчика при первом запуске
//         this.mediaArray.forEach((media) => {
//             const mediaSplit = media.split(',');
//             const mediaQuerie = window.matchMedia(mediaSplit[0]);
//             const mediaBreakpoint = mediaSplit[1];

//             // массив объектов с подходящим брейкпоинтом
//             const elementsFilter = this.elementsArray.filter(
//                 ({
//                     breakpoint
//                 }) => breakpoint === mediaBreakpoint
//             );
//             mediaQuerie.addEventListener('change', () => {
//                 this.mediaHandler(mediaQuerie, elementsFilter);
//             });
//             this.mediaHandler(mediaQuerie, elementsFilter);
//         });
//     }

//     // Основная функция
//     mediaHandler(mediaQuerie, elementsFilter) {
//         if (mediaQuerie.matches) {
//             elementsFilter.forEach((oElement) => {
//                 // получение индекса внутри родителя
//                 oElement.index = this.indexInParent(
//                     oElement.parent, oElement.element,
//                 );
//                 this.moveTo(oElement.place, oElement.element, oElement.destination);
//             });
//         } else {
//             elementsFilter.forEach(({
//                 parent,
//                 element,
//                 index
//             }) => {
//                 if (element.classList.contains(this.daClassname)) {
//                     this.moveBack(parent, element, index);
//                 }
//             });
//         }
//     }

//     // Функция перемещения
//     moveTo(place, element, destination) {
//         element.classList.add(this.daClassname);
//         if (place === 'last' || place >= destination.children.length) {
//             destination.append(element);
//             return;
//         }
//         if (place === 'first') {
//             destination.prepend(element);
//             return;
//         }
//         destination.children[place].before(element);
//     }

//     // Функция возврата
//     moveBack(parent, element, index) {
//         element.classList.remove(this.daClassname);
//         if (parent.children[index] !== undefined) {
//             parent.children[index].before(element);
//         } else {
//             parent.append(element);
//         }
//     }

//     // Функция получения индекса внутри родителя
//     indexInParent(parent, element) {
//         return [...parent.children].indexOf(element);
//     }

//     // Функция сортировки массива по breakpoint и place 
//     // по возрастанию для this.type = min
//     // по убыванию для this.type = max
//     arraySort(arr) {
//         if (this.type === 'min') {
//             arr.sort((a, b) => {
//                 if (a.breakpoint === b.breakpoint) {
//                     if (a.place === b.place) {
//                         return 0;
//                     }
//                     if (a.place === 'first' || b.place === 'last') {
//                         return -1;
//                     }
//                     if (a.place === 'last' || b.place === 'first') {
//                         return 1;
//                     }
//                     return a.place - b.place;
//                 }
//                 return a.breakpoint - b.breakpoint;
//             });
//         } else {
//             arr.sort((a, b) => {
//                 if (a.breakpoint === b.breakpoint) {
//                     if (a.place === b.place) {
//                         return 0;
//                     }
//                     if (a.place === 'first' || b.place === 'last') {
//                         return 1;
//                     }
//                     if (a.place === 'last' || b.place === 'first') {
//                         return -1;
//                     }
//                     return b.place - a.place;
//                 }
//                 return b.breakpoint - a.breakpoint;
//             });
//             return;
//         }
//     }
// }

// const da = new DynamicAdapt('max');
// da.init();

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================


// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
//slick-slider
// $(document).ready(function () {
//     $('.slider').slick({
//         prevArrow: $('.l__arrow-prev'),
//         nextArrow: $('.l__arrow-next'),
//         // Стрелки
//         arrows: true,
//         // Точки
//         dots: false,
//         // Адаптивная высота слайдов
//         adaptiveHeight: false,
//         // Автоматическое перелистывание слайдов
//         autoplay: false,
//         // Количество отображаемых слайдов
//         slidesToShow: 2,
//         // Количество перелестываемых слайдов
//         slidesToScroll: 2,
//         // Скорость перелистывания слайдов
//         speed: 1000,
//         // Скорость автоматического перелистывания слайдов
//         autoplaySpeed: 800,
//         // Тип анимации при перелистывании слайдов
//         easing: "linear",
//         // Бесконечное перелистывание слайдов
//         infinite: true,
//         // Пауза при наведении на слайд
//         pauseOnFocus: true,
//         // Пауза при наведении на весь слайдер
//         pauseOnFocus: true,
//         // Пауза при наведении на точки
//         pauseOnDotsHover: true,
//         // Перелистывание на сенсорном экране
//         swipe: true,
//         // Перелистывание только после завершения анимации
//         waitForAnimate: true,
//         // Вертикальный слайдер
//         vertical: false,
//         // Ряды
//         rows: 1,
//         responsive: [{
//                 breakpoint: 768,
//                 settings: {
//                     slidesToShow: 2
//                 }
//             },
//             {
//                 breakpoint: 550,
//                 settings: {
//                     slidesToShow: 1
//                 }
//             }
//         ]
//     });
// });
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// skewed background
// const skewed1 = document.querySelector('.skewed-background__item-1');
// const skewed2 = document.querySelector('.skewed-background__item-2');
// window.addEventListener('scroll', function(){
//     const skewedValue1 = -15 + window.scrollY/45;
//     const skewedValue2 = 15 + window.scrollY/-45;
//     skewed1.style.transform = "skewY(" + skewedValue1 + "deg)";
//     skewed2.style.transform = "skewY(" + skewedValue2 + "deg)";
// })
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// const burgerButton = document.querySelector('.header__container-burger'),
//         navigationMenu = document.querySelector('.navigation-menu'),
//         headerOverlay = document.querySelector('.header__container-overlay'),
//         navigationMenuClose = document.querySelector('.navigation-menu__close');
// burgerButton.onclick = function() {
//     burgerButton.classList.add('__active')
//     navigationMenu.classList.add('__active')
//     headerOverlay.classList.add('__active')
// }
// headerOverlay.onclick = function() {
//     burgerButton.classList.remove('__active')
//     navigationMenu.classList.remove('__active')
//     headerOverlay.classList.remove('__active')
// }
// navigationMenuClose.onclick = function() {
//     burgerButton.classList.remove('__active')
//     navigationMenu.classList.remove('__active')
//     headerOverlay.classList.remove('__active')
// }

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// const buttonDropDown = document.querySelector('.navigation-menu__button-drop-down');
// const subListItem = document.querySelectorAll('.sub-list__item');
// buttonDropDown.onclick = function() {
//     subListItem.classList.toggle('__active')
// }

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// var myMixer = mixitup ('.section-4__list');
// var parallaxImage1 = document.querySelector('.right');
// new simpleParallax(parallaxImage1, {
//     orientation: 'right'
// });
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// window.addEventListener('scroll', throttle(parallax, 14));

// function throttle(fn, wait) {
//   var time = Date.now();
//   return function() {
//     if ((time + wait - Date.now()) < 0) {
//       fn();
//       time = Date.now();
//     }
//   }
// };

// function parallax() {
//   var scrolled = window.pageYOffset;
//   var parallax = document.querySelector(".parallax");
//   // You can adjust the 0.4 to change the speed
// 	var coords = (scrolled * 0.4) + 'px'
//   parallax.style.transform = 'translateY(' + coords + ')';
// };

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// let observer2 = new IntersectionObserver((entries, observer) => {
//     entries.forEach(entry => {
//       const h2 = entry.target.querySelector('h2');
//       const id = h2.id;
//       const a = document.querySelector(`#index a[href='#${id}']`);
   
//       // if(entry.isIntersecting){      
//       //   a.classList.add('active');
//       // } else {
//       //   a.classList.remove('active');
//       // }
   
//       // entry.isIntersecting ?  a.classList.add('active') : a.classList.remove('active')
   
//       a.classList[entry.isIntersecting ? 'add' : 'remove']('active')
//     });    
//   }, {  threshold: 0.85 } );
   
//   document.querySelectorAll('section').forEach(
//     section => { observer2.observe(section) }
//   );

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// const showItem = document.querySelector(".show-item")
// const showCallback = (entries, observer) => {
//     entries.forEach((entry) => {
//         if (entry.isIntersecting) {
//             entry.target.classList.add("__show")
//         }
//     })
// }
// const showOptions = {}
// const showObserver = new IntersectionObserver(showCallback, showOptions)
// showObserver.observe(showItem)
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// const threshold = 0.8;

// document.addEventListener('DOMContentLoaded', start);

// function start() {
  
//   const options = {
//     threshold,
//   }
  
//   const observer = new IntersectionObserver(callback, options);
  
//   document.querySelectorAll('.section').forEach(elem => {
//     observer.observe(elem);
//   })
  
// }

// function callback(entries, observer) {
//   entries.forEach(entry => {
    
//     const ratio = entry.intersectionRatio;
    
//     if (ratio > threshold) {
//       entry.target.classList.remove('__show');
//     } else {
//       entry.target.classList.add('__show');
//     }
    
//   })
// }

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================

// animate on scroll


// const animItems = document.querySelectorAll('.show-item');

// if (animItems.length > 0) {
//     window.addEventListener('scroll', animOnScroll);
//     function animOnScroll() {
//         for (let index = 0; index < animItems.length; index++) {
//             const animItem = animItems[index];
//             const animItemHeight = animItem.offsetHeight;
//             const animItemOffset = offset(animItem).top;
//             const animStart = 4;

//             let animItemPoint = window.innerHeight - animItemHeight / animStart;
//             if (animItemHeight > window.innerHeight) {
//                 animItemPoint = window.innerHeight - window.innerHeight / animStart;
//             }

//             if ((pageYOffset > animItemOffset - animItemPoint) && pageYOffset < (animItemOffset + animItemHeight)) {
//                 animItem.classList.add('__show');
//             } 
//         }
//     }
//     function offset(el) {
//         const rect = el.getBoundingClientRect(),
//         scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
//         scrollTop = window.pageYOffset || document.documentElement.scrollTop;
//         return { top: rect.top + scrollTop, left: rect.left + scrollLeft }
//     }

//     setTimeout(() => {
//         animOnScroll();
//     }, 300);
    
// }

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================

// const tildCards = document.querySelectorAll('.tilt-card');

// for (let i = 0; i < tildCards.length; i++) {
//   const tildCard = tildCards[i];
//   tildCard.addEventListener('mousemove', rotate);
//   tildCard.addEventListener('mouseout', stopRotate);
// }
// function tiltRotate(event) {
//   const tiltItem = this.querySelectorAll('.tilt-item');
//   const tiltHeight = tiltItem.offsetHeight / 2;
//   tiltItem.style.transform = 'rotateX(' + -(event.offsetY -
//     tiltHeight) / 5 + 'deg') rotateY(' + (event.offsetX -
//       tiltHeight) / 5 + 'deg')';
// }

// ===================================================================================================================================================================================================================================================================================================================================================================================================================================
// ===================================================================================================================================================================================================================================================================================================================================================================================================================================

// header padding

window.addEventListener('load', headerSize, false);
window.addEventListener('resize', headerSize, false);

function headerSize() {
    const  headerHeight = document.querySelector(".header").clientHeight;
    const  headerPadding = document.querySelector(".header-padding");
    headerPadding.style.paddingTop = headerHeight + "px";
};